{
  "description": "Continuous coherence monitoring hooks for creative direction",
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "File size and structure check. Analyze this Write operation:\n\nFile: $TOOL_INPUT\n\nLimits by file type:\n- Procedural generation code (.rs in generator/): 300 soft, 400 HARD\n- Game code (.rs in game/src): 300 soft, 500 hard\n- Documentation (.md): 500 soft, 1000 hard\n- Config files: no limit\n\nCheck:\n1. Count lines. Apply appropriate limit based on file type.\n2. For procgen code, check for common bloat patterns:\n   - Large data tables (should be in constants.rs or data/ module)\n   - Functions over 80 lines (should be split)\n   - Monolithic generators (should be modular)\n\nRespond:\n- If OK: 'OK: [count] lines'\n- If WARNING: 'WARNING: [count] lines. Split: [suggestion]'\n- If CRITICAL: 'CRITICAL: [count] lines exceeds hard limit! MUST split into: [specific files]'\n\nFor procgen code over 400 lines, suggest specific module structure (textures/, meshes/, audio/ etc).\n\nKeep response under 80 words.",
            "timeout": 30
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Post-edit file size check.\n\nFile: $TOOL_INPUT\nResult: $TOOL_RESULT\n\nIf this edit grew the file past limits (procgen: 400 hard, game: 500 hard), flag it. Look for:\n- Data tables that should be extracted to constants.rs\n- Functions that should be split\n- Code that belongs in a separate module\n\nRespond only if there's a size concern (empty string otherwise).",
            "timeout": 20
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Creative direction context check. At session start, briefly check for these project direction files:\n\n1. .studio/creative-direction.md - Creative vision and pillars\n2. .studio/art-direction.md - Visual style settings\n3. .studio/sound-direction.md - Audio direction\n4. .studio/project-status.md - Previous session state\n5. .studio/architecture/ - Architecture Decision Records\n\nIf any exist, note their presence. If none exist and this appears to be a game project, suggest running /establish-vision to set up creative direction.\n\nKeep response under 50 words. If no direction files exist and project doesn't need them, respond with empty string.",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Creative direction checkpoint. Before stopping, briefly consider:\n\n1. Were any significant creative decisions made this session that should be documented in .studio/creative-direction.md?\n2. Were any architectural decisions made that need an ADR?\n3. Did any files grow past size limits that need addressing?\n\nIf any of these apply, remind the user to document them. If nothing notable, approve stopping.\n\nRespond with either 'approve' or a brief reminder (under 50 words) of what should be documented.",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
